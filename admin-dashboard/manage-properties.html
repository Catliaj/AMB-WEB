<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manage Properties | Admin Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    :root {
      --bg: #141414;
      --panel: #1c1c1c;
      --card: #1f1f1f;
      --text: #e4e4e4;
      --muted: #9ca3af;
      --accent1: #5a5cff;
      --accent2: #bb56ff;
      --accent3: #ff5ca8;
      --shadow: 0 0 12px rgba(0,0,0,0.25);
      font-family: "Montserrat", sans-serif;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    html, body {
      height: 100%;
      width: 100%;
      background: var(--bg);
      color: var(--text);
      font-size: 14px;
      overflow: hidden;
      font-family: "Montserrat", sans-serif;
    }

    body {
      display: flex;
      height: 100vh;
    }

    .sidebar {
      width: 230px;
      background: var(--panel);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 24px 0;
      flex-shrink: 0;
      box-shadow: inset -1px 0 0 #2a2a2a;
      transition: transform 0.3s ease;
      overflow-y: auto;
    }

    .sidebar img { width: 120px; margin-bottom: 30px; }

    .nav {
      display: flex;
      flex-direction: column;
      gap: 10px;
      width: 100%;
      padding: 0 22px;
    }

    .nav a {
      color: var(--text);
      text-decoration: none;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 14px;
      border-radius: 10px;
      transition: all 0.25s ease;
      font-size: 14px;
    }

    .nav a svg { width: 16px; height: 16px; stroke-width: 2; color: var(--muted); }
    .nav a:hover svg, .nav a.active svg { color: var(--text); }

    .nav a:hover, .nav a.active {
      background: linear-gradient(90deg, var(--accent1), var(--accent2));
      color: #fff;
    }

    .profile-box {
      margin-top: auto;
      width: 100%;
      padding: 14px 22px;
      border-top: 1px solid #2a2a2a;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .profile-avatar {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      background: linear-gradient(135deg, var(--accent1), var(--accent2));
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-weight: 700;
    }

    .profile-info {
      display: flex;
      flex-direction: column;
      font-size: 12px;
      line-height: 1.3;
    }

    .profile-info strong { font-size: 13px; color: var(--text); }

    .main {
      flex: 1;
      padding: 28px 36px 12px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    header h1 {
      font-size: 20px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--text);
    }

    .btn {
      background: linear-gradient(90deg, var(--accent1), var(--accent2));
      border: none;
      color: white;
      padding: 6px 12px;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      transition: all 0.2s ease;
    }

    .btn:hover { opacity: 0.9; }

    .btn.cancel {
      background: none;
      border: 1px solid #2a2a2a;
      color: var(--text);
    }

    .filters-bar {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 1rem;
    }

    .filters-bar input,
    .filters-bar select {
      background: var(--panel);
      border: 1px solid #2a2a2a;
      color: var(--text);
      border-radius: 6px;
      padding: 6px 10px;
      outline: none;
      font-size: 13px;
    }

    .filters-bar input { width: 240px; }

    .table-container {
      background: var(--card);
      border-radius: 10px;
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      color: var(--text);
    }

    thead { background: var(--panel); }

    th, td {
      text-align: left;
      padding: 10px 14px;
    }

    th {
      font-weight: 600;
      font-size: 13px;
      color: var(--muted);
      border-bottom: 1px solid #2a2a2a;
    }

    tr:hover { background: rgba(255, 255, 255, 0.05); }

    .actions {
      display: flex;
      gap: 6px;
    }

    .action-btn {
      background: none;
      border: none;
      cursor: pointer;
      color: var(--muted);
      transition: color 0.2s;
      padding: 4px;
    }

    .action-btn:hover { color: var(--accent1); }
    .action-btn.danger:hover { color: var(--accent3); }

    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      visibility: hidden;
      opacity: 0;
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .modal.active { visibility: visible; opacity: 1; }

    .modal-content {
      background: var(--panel);
      border-radius: 10px;
      padding: 20px;
      width: 400px;
      box-shadow: var(--shadow);
    }

    .modal-content h2 {
      margin-bottom: 15px;
      font-size: 16px;
      color: var(--accent1);
      font-weight: 600;
    }

    .modal-content input,
    .modal-content select {
      width: 100%;
      margin-bottom: 10px;
      background: var(--card);
      border: 1px solid #2a2a2a;
      border-radius: 6px;
      padding: 6px 10px;
      color: var(--text);
      outline: none;
      font-size: 13px;
    }

    .modal-content .actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 10px;
    }
  </style>
</head>

<body>

  <aside class="sidebar">
    <img src="amb_logo.png" alt="Logo">
    <nav class="nav">
      <a href="dashboard.html"><i data-lucide="layout-dashboard"></i> Dashboard</a>
      <a href="manage-users.html"><i data-lucide="users"></i> Manage Users</a>
      <a href="#" class="active"><i data-lucide="home"></i> Manage Properties</a>
      <a href="user-bookings.html"><i data-lucide="calendar"></i> User Bookings</a>
      <a href="view-chats.html"><i data-lucide="message-circle"></i> View Chats</a>
      <a href="generate-reports.html"><i data-lucide="bar-chart-2"></i> Generate Reports</a>
    </nav>

    <div class="profile-box">
      <div class="profile-avatar">A</div>
      <div class="profile-info">
        <strong>Admin</strong>
        <span>admin@company.com</span>
      </div>
    </div>
  </aside>

  <main class="main">
    <header>
      <h1><i data-lucide="home"></i> Manage Properties</h1>
      <button class="btn" id="btnAddProperty"><i data-lucide="plus-circle"></i> Add Property</button>
    </header>

    <div class="filters-bar">
      <input type="text" id="searchInput" placeholder="Search by title or location...">
      <select id="filterStatus">
        <option value="">Status</option>
        <option value="Available">Available</option>
        <option value="Reserved">Reserved</option>
        <option value="Sold">Sold</option>
      </select>
      <select id="filterType">
        <option value="">Type</option>
        <option value="Apartment">Apartment</option>
        <option value="Condo">Condo</option>
        <option value="House">House</option>
      </select>
      <select id="filterAgent">
        <option value="">Agent</option>
        <option value="Agent A">Agent A</option>
        <option value="Agent B">Agent B</option>
      </select>
    </div>

    <div class="table-container">
      <table id="propertyTable">
        <thead>
          <tr>
            <th>PropertyID</th>
            <th>Title</th>
            <th>Type</th>
            <th>Price</th>
            <th>Location</th>
            <th>Status</th>
            <th>Agent</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </main>

  <div class="modal" id="addModal">
    <div class="modal-content">
      <h2>Add New Property</h2>
      <input type="text" id="newTitle" placeholder="Title" required>
      <select id="newType">
        <option value="">Select Type</option>
        <option value="Apartment">Apartment</option>
        <option value="Condo">Condo</option>
        <option value="House">House</option>
      </select>
      <input type="text" id="newPrice" placeholder="Price (₱)" required>
      <input type="text" id="newLocation" placeholder="Location" required>
      <select id="newStatus">
        <option value="Available">Available</option>
        <option value="Reserved">Reserved</option>
        <option value="Sold">Sold</option>
      </select>
      <select id="newAgent">
        <option value="Agent A">Agent A</option>
        <option value="Agent B">Agent B</option>
      </select>

      <div class="actions">
        <button class="btn cancel" id="cancelAdd">Cancel</button>
        <button class="btn" id="saveProperty">Save</button>
      </div>
    </div>
  </div>

  <script>
    lucide.createIcons();

    const tableBody = document.querySelector("#propertyTable tbody");
    const searchInput = document.getElementById("searchInput");
    const properties = [
      { id: "PROP001", title: "Modern Studio Apartment", type: "Apartment", price: "₱25,000", location: "Makati", status: "Available", agent: "Agent A" },
      { id: "PROP002", title: "Elegant Condo Unit", type: "Condo", price: "₱35,000", location: "Taguig", status: "Reserved", agent: "Agent B" },
      { id: "PROP003", title: "Family House with Garden", type: "House", price: "₱50,000", location: "Quezon City", status: "Sold", agent: "Agent A" },
    ];

    function renderTable() {
      tableBody.innerHTML = "";
      const query = searchInput.value.toLowerCase();
      const status = document.getElementById("filterStatus").value;
      const type = document.getElementById("filterType").value;
      const agent = document.getElementById("filterAgent").value;

      properties
        .filter(p =>
          (!status || p.status === status) &&
          (!type || p.type === type) &&
          (!agent || p.agent === agent) &&
          (p.title.toLowerCase().includes(query) || p.location.toLowerCase().includes(query))
        )
        .forEach((prop) => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${prop.id}</td>
            <td>${prop.title}</td>
            <td>${prop.type}</td>
            <td>${prop.price}</td>
            <td>${prop.location}</td>
            <td>${prop.status}</td>
            <td>${prop.agent}</td>
            <td class="actions">
              <button class="action-btn"><i data-lucide='eye'></i></button>
              <button class="action-btn"><i data-lucide='edit-2'></i></button>
              <button class="action-btn danger"><i data-lucide='trash-2'></i></button>
            </td>`;
          tableBody.appendChild(row);
        });
      lucide.createIcons();
    }

    document.getElementById("btnAddProperty").onclick = () => document.getElementById("addModal").classList.add("active");
    document.getElementById("cancelAdd").onclick = () => document.getElementById("addModal").classList.remove("active");

    document.getElementById("saveProperty").onclick = () => {
      const title = document.getElementById("newTitle").value.trim();
      const type = document.getElementById("newType").value;
      const price = "₱" + document.getElementById("newPrice").value.trim();
      const location = document.getElementById("newLocation").value.trim();
      const status = document.getElementById("newStatus").value;
      const agent = document.getElementById("newAgent").value;

      if (!title || !type || !price || !location) return alert("Please fill in all fields.");

      const id = "PROP" + String(properties.length + 1).padStart(3, "0");
      properties.push({ id, title, type, price, location, status, agent });
      document.getElementById("addModal").classList.remove("active");
      renderTable();
    };

    searchInput.addEventListener("input", renderTable);
    document.getElementById("filterStatus").addEventListener("change", renderTable);
    document.getElementById("filterType").addEventListener("change", renderTable);
    document.getElementById("filterAgent").addEventListener("change", renderTable);

    renderTable();
  </script>
</body>
</html>
